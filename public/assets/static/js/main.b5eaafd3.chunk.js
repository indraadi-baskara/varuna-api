(this.webpackJsonpfront_end=this.webpackJsonpfront_end||[]).push([[0],{34:function(e,t,a){e.exports=a(63)},39:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(32),l=a.n(r),c=(a(39),a(18)),o=a(16),i=a(1),u=a(10),m=a.n(u),h=a(14),p=a(3),d=a(4),v=a(13),f=a(6),g=a(5),b=a(12),x=a.n(b);var y=function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),r=a[0],l=a[1],o=Object(n.useState)(e.value),i=Object(c.a)(o,2),u=i[0],m=i[1];return s.a.createElement("div",{className:"relative text-left ml-1"},s.a.createElement("div",null,s.a.createElement("span",{className:"rounded-md shadow"},s.a.createElement("button",{onClick:function(){return l(!r)},type:"button",className:"inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-sm leading-5 font-medium text-gray-700 hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue active:bg-gray-50 active:text-gray-800 transition ease-in-out duration-150",id:"options-menu","aria-haspopup":"true","aria-expanded":"true"},u||"Pilih",s.a.createElement("svg",{className:"-mr-1 ml-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},s.a.createElement("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"}))))),s.a.createElement("div",{className:"".concat(r?"block":"hidden"," origin-top-right absolute right-0 mt-2 w-32 rounded-md shadow-lg")},s.a.createElement("div",{className:"rounded-md bg-white shadow-xs"},s.a.createElement("div",{className:"py-1",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu"},e.options.map((function(t,a){return s.a.createElement("span",{key:a,onClick:function(){return function(t,a){"Bulan"===e.name&&e.setDropdownValue(++a),"Tahun"===e.name&&e.setDropdownValue(t),m(t),l(!1)}(t,a)},className:"block px-4 py-2 text-sm leading-5 text-gray-700 hover:bg-gray-100 hover:text-gray-900 focus:outline-none focus:bg-gray-100 focus:text-gray-900 cursor-pointer"},t)}))))))};var E=function(e){var t=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],a=e.value.inputBulan;return s.a.createElement("div",{className:"w-full flex justify-between items-center mb-2"},s.a.createElement("p",null,"Laporan pada bulan ",t[a],", ",e.value.inputTahun),s.a.createElement("div",{className:"inline-flex"},s.a.createElement(y,{name:"Bulan",value:t[a],options:t,setDropdownValue:e.handleInput.setInputBulan}),s.a.createElement(y,{name:"Tahun",value:e.value.inputTahun,options:[2017,2018,2019,2020],setDropdownValue:e.handleInput.setInputTahun})))},k=function(){var e=document.location.host;return"localhost"===document.location.hostname?(console.log("yes it is"),"localhost:3020"):e},w=function(e){Object(f.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={hostname:e.hostname,status:e.status},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this.axiosCancelSource=x.a.CancelToken.source(),this.getServerConnectionStatus(this.state.hostname),this.timerID=setInterval((function(){e.getServerConnectionStatus(e.state.hostname)}),1e4)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.axiosCancelSource.cancel("Request cancelled..."),clearInterval(this.timerID)}},{key:"getServerConnectionStatus",value:function(){var e=Object(h.a)(m.a.mark((function e(t){var a,n,s,r,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=k(),e.next=4,x.a.get("http://".concat(a,"/api/connection/").concat(t),{timeout:5e3,cancelToken:this.axiosCancelSource.token});case 4:n=e.sent,s=n.data,r=s.hostname,l=s.status,void 0!==this.props.handleOnlineStatus&&"offline"==this.state.status&&this.props.handleOnlineStatus(),this._isMounted&&this.setState({hostname:r,status:l}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),this._isMounted&&this.setState({status:"offline"});case 15:case"end":return e.stop()}}),e,this,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e={offline:{color:"red"},online:{color:"green"}};return s.a.createElement("div",{className:"ml-3 text-xs inline-flex items-center font-bold leading-sm uppercase px-3 py-1 bg-".concat(e[this.state.status].color,"-200 text-").concat(e[this.state.status].color,"-700 rounded-full")},this.state.status)}}]),a}(n.Component),N=function(e){Object(f.a)(a,e);var t=Object(g.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"bg-orange-100 border-l-4 border-orange-500 text-orange-700 p-4",role:"alert"},s.a.createElement("p",{className:"font-bold"},"Oooppsss....."),s.a.createElement("p",null,this.props.message))}}]),a}(n.Component),j=function(e){Object(f.a)(a,e);var t=Object(g.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"sk-folding-cube"},s.a.createElement("div",{className:"sk-cube1 sk-cube"}),s.a.createElement("div",{className:"sk-cube2 sk-cube"}),s.a.createElement("div",{className:"sk-cube4 sk-cube"}),s.a.createElement("div",{className:"sk-cube3 sk-cube"}))}}]),a}(n.Component),O=function(e){Object(f.a)(a,e);var t=Object(g.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"formatCurrency",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return"Rp. "+parseInt(e).toLocaleString("id-ID")}},{key:"renderTableHeader",value:function(){return this.props.tableFields.map((function(e){return s.a.createElement("th",{key:e,className:"px-6 py-3 bg-gray-50 text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},"tgl_jual"===e?"TANGGAL":e)}))}},{key:"renderTableRowData",value:function(){var e=this;return this.props.data.map((function(t){return s.a.createElement("tr",{key:t.tgl_jual,className:"hover:bg-gray-100 cursor-pointer"},e.props.tableFields.map((function(a){return s.a.createElement("td",{key:"".concat(t.tgl_jual,"-").concat(a),className:"px-6 py-4 whitespace-no-wrap text-sm leading-5 text-gray-500"},"tgl_jual"===a?t[a]:e.formatCurrency(t[a]))})))}))}},{key:"renderTableFooter",value:function(){var e=this;return this.props.tableFields.map((function(t){return s.a.createElement("th",{key:t,className:"px-6 py-3 bg-green-200 text-xs leading-4 font-medium text-green-700 uppercase tracking-wider"},"tgl_jual"===t?"TOTAL":e.formatCurrency(e.props.total[t]))}))}},{key:"renderTable",value:function(){return s.a.createElement("table",{className:"min-w-full divide-y divide-gray-200 text-right"},s.a.createElement("thead",{className:"text-center"},s.a.createElement("tr",null,this.renderTableHeader())),s.a.createElement("tbody",{className:"bg-white divide-y divide-gray-200"},this.renderTableRowData()),s.a.createElement("tfoot",{className:"text-right"},s.a.createElement("tr",null,this.renderTableFooter())))}},{key:"render",value:function(){return this.props.isLoading?s.a.createElement(j,null):this.renderTable()}}]),a}(n.Component),T=function(e){Object(f.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={reports:{success:!0,tahun:null,bulan:null,result:[]},inputBulan:8,inputTahun:2020},n.handleInputBulan=n.handleInputBulan.bind(Object(v.a)(n)),n.handleInputTahun=n.handleInputTahun.bind(Object(v.a)(n)),n}return Object(d.a)(a,[{key:"handleInputBulan",value:function(e){this.setState({inputBulan:e})}},{key:"handleInputTahun",value:function(e){this.setState({inputTahun:e})}},{key:"componentDidMount",value:function(){var e=this.props.match.params.location;this.getReports(this.state.inputBulan,this.state.inputTahun,e)}},{key:"componentDidUpdate",value:function(e,t){var a=this.state,n=a.inputBulan,s=a.inputTahun;if(n!==t.inputBulan||s!==t.inputTahun){var r=this.props.match.params.location;this.getReports(this.state.inputBulan,this.state.inputTahun,r)}}},{key:"getReports",value:function(){var e=Object(h.a)(m.a.mark((function e(t,a,n){var s,r,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=k(),e.next=3,x.a.get("http://".concat(s,"/api/reports/").concat(n,"/").concat(a,"/").concat(t));case 3:r=e.sent,l=r.data,this.setState({reports:l});case 6:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"callculateTotal",value:function(){return this.state.reports.result.reduce((function(e,t){return Object.keys(t).forEach((function(a){"tgl_jual"!==a&&(e[a]=(e[a]||0)+t[a])})),e}),{})}},{key:"render",value:function(){var e=this.callculateTotal(),t=this.props.match.params.location;return s.a.createElement("section",null,s.a.createElement("header",{className:"bg-white shadow"},s.a.createElement("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8"},s.a.createElement("h1",{className:"text-3xl font-bold leading-tight text-gray-900"},"Laporan ",s.a.createElement(w,{hostname:t,status:"offline"})))),s.a.createElement("main",null,s.a.createElement("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},s.a.createElement("div",{className:"flex flex-col"},s.a.createElement(E,{handleInput:{setInputBulan:this.handleInputBulan,setInputTahun:this.handleInputTahun},value:{inputBulan:this.state.inputBulan-1,inputTahun:this.state.inputTahun}}),this.state.reports.success?s.a.createElement("div",{className:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},s.a.createElement("div",{className:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8"},s.a.createElement("div",{className:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg"},s.a.createElement(O,{tableFields:["tgl_jual","BEV","FOOD","JUMLAH","TAX","SERVICE","TOTAL","TARGET"],total:e,data:this.state.reports.result})))):s.a.createElement(N,{message:"Data pada bulan ini belum dimasukkan"})))))}}]),a}(n.Component),B=Object(i.f)(T),S=function(e){Object(f.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={reports:{name:"Laporan",success:!0,tahun:null,bulan:null,result:[]},inputBulan:(new Date).getMonth()+1,inputTahun:(new Date).getFullYear(),isLoading:!0},n.handleInputBulan=n.handleInputBulan.bind(Object(v.a)(n)),n.handleInputTahun=n.handleInputTahun.bind(Object(v.a)(n)),n.handleOnlineStatus=n.handleOnlineStatus.bind(Object(v.a)(n)),n}return Object(d.a)(a,[{key:"handleInputBulan",value:function(e){this.setState({inputBulan:e})}},{key:"handleInputTahun",value:function(e){this.setState({inputTahun:e})}},{key:"handleOnlineStatus",value:function(){var e=this.props.match.params.location;this.getReports(this.state.inputBulan,this.state.inputTahun,e)}},{key:"componentDidMount",value:function(){this._isMounted=!0,this.axiosCancelSource=x.a.CancelToken.source();var e=this.props.match.params.location;this.getReports(this.state.inputBulan,this.state.inputTahun,e)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.axiosCancelSource.cancel("Request cancelled...")}},{key:"componentDidUpdate",value:function(e,t){var a=this.state,n=a.inputBulan,s=a.inputTahun;if(n!==t.inputBulan||s!==t.inputTahun){var r=this.props.match.params.location;this.getReports(this.state.inputBulan,this.state.inputTahun,r)}}},{key:"getReports",value:function(){var e=Object(h.a)(m.a.mark((function e(t,a,n){var s,r,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.setState({isLoading:!0}),s=k(),e.next=5,x.a.get("http://".concat(s,"/api/target/").concat(n,"/").concat(a,"/").concat(t),{cancelToken:this.axiosCancelSource.token});case 5:r=e.sent,l=r.data,this._isMounted&&this.setState({reports:l,isLoading:!1}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),this._isMounted&&this.setState({isLoading:!1});case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"callculateTotal",value:function(){var e=[];return this.state.reports.result&&(e=this.state.reports.result.reduce((function(e,t){return Object.keys(t).forEach((function(a){"tgl_jual"!==a&&(e[a]=(e[a]||0)+t[a])})),e}),{})),e}},{key:"render",value:function(){var e=this.callculateTotal(),t=this.props.match.params.location;return s.a.createElement("section",null,s.a.createElement("header",{className:"bg-white shadow"},s.a.createElement("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8"},s.a.createElement("h1",{className:"text-3xl font-bold leading-tight text-gray-900"},this.state.reports.name,s.a.createElement(w,{name:this.state.reports.name,hostname:t,handleOnlineStatus:this.handleOnlineStatus,status:"offline"})))),s.a.createElement("main",null,s.a.createElement("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},s.a.createElement("div",{className:"flex flex-col mx-3"},s.a.createElement(E,{handleInput:{setInputBulan:this.handleInputBulan,setInputTahun:this.handleInputTahun},value:{inputBulan:this.state.inputBulan-1,inputTahun:this.state.inputTahun}}),this.state.reports.success?s.a.createElement("div",{className:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},s.a.createElement("div",{className:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8"},s.a.createElement("div",{className:"bg-white shadow overflow-hidden border-b border-gray-200 sm:rounded-lg"},s.a.createElement(O,{isLoading:this.state.isLoading,tableFields:["tgl_jual","BEV","FOOD","JUMLAH","TAX","SERVICE","TOTAL","TARGET"],total:e,data:this.state.reports.result})))):s.a.createElement(N,{message:"Data pada bulan ini belum dimasukkan"})))))}}]),a}(n.Component),I=Object(i.f)(S),C=function(e){Object(f.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={outlets:{}},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.getOutlets()}},{key:"getOutlets",value:function(){var e=Object(h.a)(m.a.mark((function e(){var t,a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k(),e.next=3,x.a.get("http://".concat(t,"/api/config"));case 3:a=e.sent,n=a.data,this.setState({outlets:n});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=Object.values(this.state.outlets).map((function(e){return s.a.createElement(o.b,{key:e.name,to:"/target/".concat(e.hostname)},s.a.createElement("div",{className:"max-w-xs bg-white shadow-lg rounded-lg overflow-hidden my-2 mx-4"},s.a.createElement("img",{className:"w-full h-36 object-cover object-center",src:e.img,alt:"avatar"}),s.a.createElement("div",{className:"flex justify-between items-center px-6 py-3 bg-gray-900"},s.a.createElement("h1",{className:"mr-3 text-white font-semibold text-lg capitalize"},e.name),s.a.createElement(w,{name:e.name,hostname:e.hostname,status:e.status}))))}));return s.a.createElement("section",null,s.a.createElement("header",{className:"bg-white shadow"},s.a.createElement("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8"},s.a.createElement("h1",{className:"text-3xl font-bold leading-tight text-gray-900"},"Pilih Outlets"))),s.a.createElement("main",null,s.a.createElement("div",{className:"max-w-7xl mx-auto py-3 sm:px-6 lg:px-8 flex justify-center flex-wrap"},e)))}}]),a}(n.Component);var M=function(){var e=Object(n.useState)(!1),t=Object(c.a)(e,2),a=t[0],r=t[1];return s.a.createElement(o.a,null,s.a.createElement("div",{className:"bg-gray-100 min-h-screen"},s.a.createElement("nav",{className:"bg-gray-800"},s.a.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},s.a.createElement("div",{className:"flex items-center justify-between h-16"},s.a.createElement("div",{className:"flex items-center"},s.a.createElement("div",{className:"flex-shrink-0"},s.a.createElement(o.b,{to:"/"},s.a.createElement("img",{className:"h-8 w-8",src:"https://tailwindui.com/img/logos/workflow-mark-on-dark.svg",alt:"Workflow logo"}))),s.a.createElement("div",{className:"lg:block sm:hidden"},s.a.createElement("div",{className:"ml-10 flex items-baseline space-x-4"},s.a.createElement(o.b,{to:"/",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-300 hover:text-white hover:bg-gray-700 focus:outline-none focus:text-white focus:bg-gray-700"},"Home")))),s.a.createElement("div",{className:"-mr-2 flex md:hidden"},s.a.createElement("button",{onClick:function(){return r(!a)},className:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none focus:bg-gray-700 focus:text-white"},s.a.createElement("svg",{className:"".concat(a?"hidden":"block"," h-6 w-6"),stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},s.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})),s.a.createElement("svg",{className:"".concat(a?"block":"hidden"," h-6 w-6"),stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},s.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})))))),s.a.createElement("div",{className:"".concat(a?"block":"hidden"," md:hidden")},s.a.createElement("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3"},s.a.createElement(o.b,{to:"/",className:"block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-gray-700 focus:outline-none focus:text-white focus:bg-gray-700"},"Home")))),s.a.createElement(i.c,null,s.a.createElement(i.a,{exact:!0,path:"/target/:location"},s.a.createElement(I,null)),s.a.createElement(i.a,{exact:!0,path:"/reports/:location"},s.a.createElement(B,null)),s.a.createElement(i.a,{exact:!0,path:"/"},s.a.createElement(C,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[34,1,2]]]);
//# sourceMappingURL=main.b5eaafd3.chunk.js.map